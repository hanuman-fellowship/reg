<pre>
Programs and Rentals

This is a long story with many subplots.

Programs can only be seen by users with a role
of Program Staff or Program Admin.

At this point in development the main goal is to
create programs and to generate their web pages.
This takes a good bit of doing.

A program has many attributes.

Name
Start date
End date
Title
Subtitle
Description
Cancellation Policy
Housing Cost
etc.

Some are required, some default automatically.

The start date must be before the end date (unless,
that is, the program name is "Personal Retreats" in
which case both should be blank).

Note that after creation the day of the week (Mon, Thu) of the
    start and end dates is shown in red.

The GL Number is calculated automatically based on the
program start date.  It is composed of 4 parts:
    year number (only the final digit 2008 => 8)
    month (two digits - September => 09)
    week number (which week of the month is this program in?)
        if start date is 09/02/07 => 2
        if start date is 09/30/07 => 6
    which program/rental in the week?
        normally just 1
        if more then they're assigned sequentially as
        the programs/rentals are created.

    Verify all these things.  A challenge!
    Only the super admin can edit the GL Number directly.

    A program named 'Personal Retreats'
        is an exception here.  It's GL Number is initially '99999' and
        can only be changed by the super admin.

Footnotes can only contain *, % and +.

Extra Days - this program attribute (default is 0)
    causes some interesting things to happen.
    If it is > 0 then the program has two parts.
    The second part will have this many additional days.
    People can register for either the Basic or the Full program.
    The full program is named the same as the Basic but
    with " FULL" appended to it.  This full program is
    not editable or deletable (sp?).  It is edited and deleted
    for you when you edit or delete the Basic program.
    Full programs are just 'placeholders' for people to
    register for.  They are automatically not linked and
    not web ready.  If a basic program has extra days
    then you must supply a "Full Tution" which must be
    more than "Tuition".
    
    For fun, try editing a Basic program that does not
    have a FULL version.   Change 'Extra Days' from 0 to 3
    and see what happens.   Edit a Basic program that DOES
    have a FULL version and change its Extra Days from
    non-zero to 0 and see what happens.

These categories of information are subsidiary to Programs:

Leaders
Cancellation Policies
Housing Costs
Templates
Exceptions
Rentals - in a way, too.
Strings

Leaders are created by first finding/adding them as a Person.
Then you can say "Make Leader" and fill in the Leader attributes.
None of the leader attributes are required (except for order).
    If an email address is given it must be in a valid
    syntax - a very basic check for this is performed.

    The Order attribute defaults to 1.  If there is more than
    one leader for a program the order they are presented
    on the web page is determined by this field.

You can optionally upload a picture of the leader.
It will be resized for you so don't worry about its size.
There _will_ be a small and a large version so please
upload a big enough image.  The widths of the two
sizes are controlled by a String (see below).  These comments about
images apply to the images for a Program, too.
After creation of a leader you can go back and forth
between "Leader Info" and "Person Info".

When viewing the program (not when creating or editing it)
you can add a Leader and an Affiliation to a program.
Do these things by choose "Update" (in the middle of the program screen).
    You can choose as many leaders and affiliations as you please.
    Only the first two leaders (alphabetically) will have
    their pictures shown - assuming there is no program image
    (which takes priority over leader images).

Cancellation Policies must have one named "Default".
It is the normal policy that programs will have.
A cancellation policy is essentially just a bit of
explanatory text with a name.

Housing Costs must have one named "Default".
It is the normal lodging costs for a program.
There are 13 types of housing with a cost for each.
The cost fields must be either blank or a number.
If a cost is zero (0) this housing type will not be offered.

Try creating new Cancellation Policies and Housing Costs.

Templates are complex pieces of HTML that have 'tags'
within them.  The role of Web Designer is the only one
that can see and modify these templates.  Note that
certain templates cannot be deleted (No Del link available on these).
These template names are needed by reg.  The others can be selected
when creating a program.  Certain programs (like AVI or OGS) will
have their own template.  The default template is named
"default".   Unlinked programs are not allowed
to use this default.  Use 'ul_template' or 'avi_template' for example.
Unlinked programs also need an 'Unlinked Dir' which is a directory
name that is appended to http://www.mountmadonna.org/ to make
the published location of the unlinked program web page.
This name can be composed only of letters, numbers and the punctuation
characters underscore, minus, and period.

There are also templates for the confirmation letter.
This is another attribute for the program.
They are viewable, uploadable and deletable (mostly)
from the "Templates" page.

Exceptions can only be seen/created by the role
of Web Designer.   An 'Exception' is composed of a Program name,
a tag name (selected from a fixed list), and
a value.   When filling tags in a template for a given
program you can make a specific exception and supply the value.
This is not needed often but it is nice to have.

Rentals are another type of program.  But simpler.
    There is no image but there is a telephone number and an email address.
    Like programs, the start date must be before the end date.
    Try getting error messages here.  Rentals also have
    GL Numbers (see above).

Strings - this is a fixed list of key/value pairs.
This supplies various explanatory labels on the web
pages and also various configuration values.   Only
the web designer role can see/modify these.
A character of a double quote " in these strings
will be displayed in the input field as %22.  Hopefully
this will not be too obscure!    You _can_ put "
in the field.  Maybe this can be improved later.

When viewing a program there are links for the
    leaders, cancellation policy and housing cost
    by which you can go directly and see those things.
    Try each.

******
Sidenote: For all date fields (programs, rentals, members)
you can enter a date (e.g. November 8, 2009) in a variety of ways:

11/08/09
11-8-9
20091108

For today just enter 't'.
For the 5th of the current month just '5'.
For November 8th in the current year just '11 8' or '11/8'.

Note that the End Date of a program is _relative_ to
the Start Date.   You can put +2 in the End Date field
for normal weekend programs.
******

******
Sidenote:  In the web descriptions of programs and rentals
and in the leader biographies you can use these shortcuts
for various formatting, links, and lists:

This is *very* important and _fun_.

Click % here % www.lala.com %

Mail me here: ~jon@logicalpoetry.com~.

# one
# two
# three

- red
- blue
- green

******
Try each of the above and see what happens in the generated web page.


PUBLISHING
==========
After all this information is in place you
can choose "Publish" and the web pages for the programs
will be generated.  This "Publish" link appears
in several places for convenience.
The response to "Publish" includes a link to
also publish the pictures - to be used only as needed
when they have changed.   On this response page there is
also a link to see the generated and published
web pages.   Examine each page _carefully_ to verify
all the information on it.  Be especially attentive
to the costs and cancellation policies.
There are two links on the response page: programs and events.
The events page includes the rentals, the programs link does not.

The following program attributes affect (effect?) which types
    of housing are offered:

        Single Bath
        Economy
        Quad

    You can check them on or off.  They're displayed
    as "yes" or blank respectively.   If a housing cost
    is zero - this is another way to not offer a particular
    housing type.

    Verify that generated web page has or does not have
    the proper housing types.

Note that it is only the FUTURE programs and rentals 
that are published.  AND only those programs that are 'Web Ready'
and those rentals that are 'Linked'.

Programs that are not 'Linked' are required to have
an Unlinked Dir attribute.   This is used when publishing.
The web page is put at: www.mountmadonna.org/dirname

These unlinked programs are listed on the response page and you
can click on the links to see the unlinked program pages.
These programs are called 'unlinked' because from
the main program and event pages there is no link
to these unlinked programs - no way to get there from here.
This is used by groups such as OGS and AVI that
do not want to be seen (why?) a part of the sequence of programs
at MMC.

BROCHURE
========
Jamal will use the "Brochure" link to get the above program information
in a form that is convenient for creating the printed brochure.
If there is a "Brochure Description" available it will be used
otherwise the "Web Description" is taken.  The exact syntax of
what Jamal needs in this is up to him.  To generate the brochure
you specify a season and a page number where the lodging fees
will be listed.

THE PROGRAM LIST
================
On first choosing "Programs" at the top you will see
all current and future programs - their name, description
and the number of current registrations.

This list includes programs
that are still in progress and a "Personal Retreat" program
whose dates span the entire current season (10/1-3/31 for fall/winter
and 4/1-9/30 for spring/summer). Registrants for Personal
Retreats will specify arrival and departure dates to override these
dates - unless they want to stay the entire season, that is. :)

On the program list:

    Click on the program name to see the program attributes.
    Click on the program description to see registrations for
        that program.

If you wish to see programs aside from the current and future
ones you can enter a term in the Search text field and hit Return.
In this field you can put a season (s03, f98, f07)
to see all programs in that season.
You can also put a pattern such as "korn" or "*dya".
The '*' is a wildcard, as usual.  All programs (going back to
the beginning of time) whose name matches this pattern will be shown.
</pre>
