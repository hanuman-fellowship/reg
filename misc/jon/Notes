extra body tag okay?
    I got the focus right using it.
footer is at a particular x coord?   > 20 nrecs it stays??? :(
    it's actually off screen :(
    i tried to get rid of it entirely with no luck.
    success - edited the css file.
empty message => "There is no message".
    some way in TT to make it empty?
    failed to reset message with query parameter, too.
    tutorial says it is better to use the 'flash' technique?  what's that?
    use this for rewriting the update url as well.
trim in Util.pm instead of Person.pm?
    done
not sure what is the convention for controllers /mlist/update or /person/update?
    how about for templates?   mlist/search.tt2 or person/search.tt2?
    person/update controller is in Person.pm, right?
    perhaps if the view is about a particular model then
        the tt2 file belongs there
really cool that you can muck with the view
    without restarting the server.  only when changing the controllers
    do you need to restart.
rewriting the URLs in case someone does a refresh
    good after a delete, update_do
    I followed the tutorial.
    I didn't use Catalyst.uri_for... for the form actions
        in the templates.  Okay?
**check for dups in create, update
how to change the name_pref?
need to put css class/div tags in the tt2 files.
got the function - at some point the appearance
get some cute little gifs for view/edit/delete?
    steal somewhere?
maxsize for text fields? so can't scroll them.
max for nrecs?  to protect against mistakes?
i forgot affils.
need another link for crud for affils.
how to do logging??  not to browser, how into server log???
prohibit [>"'] as a_code - will interfere with html syntax
    also # ) etc.  is there a uri_encode thingy?
    to hex encode it?
tried editing root/lib/config/main
    looked like Perl so used heredoc.  no no.  this is TT.
**Add to program attributes:
**    registration start and end time
**    program start time and end time
**Add a table for _system_ type attributes:
**    Start/end times for dinner on different days??
**How to quote a value in the template which might
    contain a ' and a "????   e.g. last name in the
    person update form.  last name of D'Angelo.
    " is safer, I guess. but not 100%.
I notice that after the update form is submitted
    it does a selective update - only the fields that changed
    AND the blank fields are rewritten.  Yes?
I guessed (and was right) that the create method
    returns the object it just created!
**isn't it rather unOO to dig into the stash hashref???
**    or the params hashref???   Verbose, too.
**    $c->stash("key", "value"); seems better to me than
**    $c->stash->{key} = "value";
**    my $pattern = $c->request->params->{pattern};
**    or
**    my $pattern = $c->params('pattern');
delete_all() for deleting a person is rather inefficient
    in the way it deletes the affiliations.   better to
    just do a delete after a search on the affiliation table
    for p_id = $id!
the fancy auto generated accessor 'affils' is nice
    but it doesn't sort as I would like...
    any way to specify an order by?
need javascript validation of sex, alert before delete
    other required fields?
    date validation
**    email validation
affiliations in column sort not running sort?
    since i'm not doing it in the template... i can be smarter.
    done.  nicely.  I did put some HTML in the controller.
    am I forgiven?
delete an affiliation - also delete from affil_people.
    done.
should we use automated form creation, field validation
    a la HTML::Widget as explained in part 8 of the tutorial?
    or should we do it ourselves - with better control?
    i haven't tried part 8 yet so perhaps can't speak...

partnering is next?

phone list - do I join 3 tables with descrip = "Phone List"
    or find the proper affil.id first, then join 2?
    how to do joins at all???
    or perhaps do the SQL yourself???  heavens!

in creating new tables I keep forgetting the "DB"
    after "RetreatCenter" in various places.
    get a long error message...
this passage in Authentication tutorial I did not understand:
    Another option would be to use something like
	sub base :Path :Args(0) {...} (where the ... refers to the
	login code shown in sub index : Private above).  We are
	using sub base :Path :Args(0) {...} here to specifically
	match the URL /login. Path actions (aka, "literal actions")
	create URI matches relative to the namespace of the controller
	where they are defined. Although Path supports arguments
	that allow relative and absolute paths to be defined, here
	we use an empty Path definition to match on just the name
	of the controller itself. The method name, base, is arbitrary.
	We make the match even more specific with the :Args(0)
	action modifier -- this forces the match on only /login,
	not /login/somethingelse.
a lot of this authentication is boilerplate.
    you CAN do things differently but rarely need to.
    so just copy it and use it until it becomes obvious
    that you need something different...
also don't understand the types of "Actions" as described
    in the Catalyst::Manual::Intro
    it may become clearer later when we need different things.
I fiddled a good deal with the layout/html/main/etc
    and the ttsite.css.   Show Shankar.  See if there's a better way.
just thought... if either Shankar or I started slowing down
    and charging for not doing much then the do-not-exceed
    might be reached - we need to be able to challenge each other.
    i guess the same would apply if one of us was much slower
    than the other.   is this a problem?
    we're actually quite comparable in that respect i think.
i moved to create_edit.tt2 instead of the object name.
    need to muck with CVS.
change RetreatCenter to some other better name?
    what should we call this?
    or is it not worth the CVS and editing trouble?
    hello there
maybe we should do the hardest parts (housing, housekeeping report, etc)
    first.  then when and if we reach the do-not-exceed limit
    we can start to re-interpret the spec a bit to lessen
    our task.   if we did the easier parts perfectly and
    at great length of time and then realized we were
    running out of money - it would be more difficult
    to 'cut corners' to reduce the project if we had to
    implement the intricacies and trickynesses of housing.
    the housing part is what they really need so let's
    do that first and right.  first mlist to get our bearings
    and learn the tools.
how about a link on the view person page to do a dup search?
    it is done after a create - and in the unduplication listing.
    not after an update.
Catalyst is smart to not include methods that begin
    with an underscore in its list of actions that is displayed
    on startup.
Hire a user interface expert graphics person like Matt
    to help us design the UI.  Jamal???
    Just like the work at Integration.
    Shankar and I would take too long to do it...

    I don't feel right when I charge for endless fiddling with
    the look of it.  My job is the function not the appearance.
    Same for Shankar.

    the users will want it to look a certain way
    so it will change so we shouldn't spend too long on it
    before consulting them.
styles in the views - better in the .css file
    see view.tt2 and the width of the email field
    if we enlarge the font - the 2 inch width may not be right.
**why do we need to put "Catalyst::uri_for('/person/search')"
**    and not just "/person/search"?  can we ask the experts?
DBIx::Class is simply not documented well enough yet.
    Catalyst is not that great either.
**    Is there an O'Reilly book in progress?
        for DBIx::Class or for Catalyst?
        call O'Reilly.  perhaps the system(s) are
        not yet mature enough.
    DBIx::Class is so fucking abstract.
        and it avoids SQL like the plague.  Why?
        If there's not going to be an easy way to
        construct the SQL::Abstract for a query that I know
        I'm going abandon DBIx::Class and make my own.
        It's not that hard.
How about a large example of a Catalyst application?
    open source, free to browse
    complex, well explained.
**Where is it documented what all that stuff in root/src does?
**    Any way to turn it off for a screen that is
**    destined for the printer?   This is an application
**    not a 'site'.
Egos abound.  Hackers love to make systems
    so complex and so abstract that they are viewed
    as profound geniuses.
    That DBIx::Class has a Cookbook, a Tutorial, an Intro, a FAQ,
    and an Example is not a good sign.  Why not just explain
    it?  Having stuff you can copy or mimic is not the
    same as understanding.
**what is the timeout value for login sessions?
**      settable where?
**several different affiliations for
**    do not send me any mailings.   should they all
**    be collapsed into one?   8, 9, do not distribute, do not Give out, etc.
the capitalization mixed case was not done very
    intelligently - O'brien for example.
    MCCALL -> MCC ???
    can we make it better?
**work on mlist so no dup ids!
    that's no good
**need someone to rework the out of usa records!
    there is an affiliation - likely not used consistently...
    look for zip code of blank?
    I can make further custom listings that don't
    fit into the Report model.
how about a report format that puts a link on
    the person's name - so you can edit their record!
reformat the phone numbers in a consistent way?
    the ones in the US anyway?
addr1 addr2 - in Email to CMS format - extra space at the end
    could have addrs method to remedy this.
**another attribute of a person
**    comments about extreme food or picky needs
**    difficult behavior
**    and this would pop up during registration
**search people by home phone
**    exact syntax needed.
**    831-460-2648 would not match (831) 460-2648
**    could do substring search of 2648 and find it.
what happens when one of two partners
    has a new address that is not the same as their partner?
    they should be separated at that time!
for reports - can't do a file://...    how to do it?
for programs
    checkbox labels - should be bold?  or a class?
    a class to match the other labels... which are just <th>.

**for some reason sqlite3 allows putting 'yes' in an integer field
**    e.g. all the checkbox fields in program table.
**    make em text.
Hardcoded Defaults for programs:
    Default - Housing Cost
    MMC     - Cancellation Policy
**should role 'user' be able to delete/edit reports?
do we need a role 'reception' - they can't see programs at all.
    only people, affils, reports, listings.
cascade deletes of affiliations to reports and programs as well.
    and leaders to programs
    or prohibit??? yes.
**more program form validation
**if you go to the login screen but you're already
**    logged in - go to the people search screen instead!
prohibit a delete of a person, housecost, calpol or leader
    if there are foreign keys to it.
    jeeeez - it gets complicated!
dates can be entered as 090910 for 9/9/2010
    for doc...
images for leaders and programs - does the
    little server do file uploads???
When in admin role and click on Program's housing costs
    should the user view the cost structure and also see
    Create  Edit  Delete???
    ditto for Cancellation Policy??
can't put a '+' in a form text field!
    why?   it is the only character that is special in this way.
    use method=POST for such forms
    it is not within DBIx::Class.
    it's within Catalyst server???
If you have two or more leaders
    they will be listed in alphabetical order
**    based on Last name, then first.  Okay?
    What if there is one main leader and a minor one.
after publish - go to list with message
after program edit go to list as well?
    these are good questions for the users.
is there no value= field for <input type=file>???
    wouldn't apply anyway...
    do we need a separate update form for images???
when deleting a leader
    their person record remains intact, "make leader" returns
    make sure to delete the associated image, if any.
which roles?
    admin / template-editor
    admin can create programs
        but not edit/delete the templates
put a javascript alert in front of deleting images
    in leaders, programs
members, images (for templates)
**restrictions on passwords?   >=5, what else?
**in updating strings - no " char.  ' okay.
**why use Catalyst.uri_for('/program/list') instead
**    of just '/program/list'?   for when it isn't localhost::3000?
mailto links on email addresses
do stale soon
**test - trimming of email in leader, user, rental and person
http:// off in rental, leader
**renamed tags:
    title => title1
    subtitle => title2
    weburl, website => weburl
    leaders => leader_names
**renamed styles
    title => title1
    subtitle => title2
    in e_progRow - event_title2, event_title2
    in progRow - title... ?? look
**can't put html tags in textareas :(
    what to do?  prohibit them, process before use
    like with expand.
    wiki things?
style sheet in picture popups???
    fully qualified domain for pic?
i put align=center where the click_enlarge style sheet
    could have taken care of it.
change big_imgwidth and you will
    need to reupload all the pictures
still need to do this:
    generate eventlist, programlist for events.html and programs.html
    make regtable - using prognum - corresponding to the use of it in
        program html pages.
did prognum - something still wrong with links
    to programs - it includes 'gen_files/'.
Rental email, phone are not just the field values.
    need separately named method.

To tell Adrienne:
    document
        attitude of "come here... sit down and I'll explain it to you".
        humor is always welcome and always helps - perhaps in footnotes or
            as an addendum if it might get in the way...
        documents written by engineers are often lousy
        she can use my cms_mmc.html as a secondary reference
            the program itself as the first.
        make it an HTML document accessible from the program directly 
            use a simple style (like cms_mmc.html) - content matters most
            Jamal can help fancy it up if needed.
        perhaps a task oriented format in one chapter?
            how do I do such and such a task?
        in the end - she should write the kind of document
            that she would want to read
    if overwhelmed by complexity
        not so complex yet - sans registration and sans housing!
        Twain as Mississipi riverboat pilot
    testing
        feedback!  her own or what she gathers/overhears in the office.
        not a whitewash, please!
        even trivial things.
        a successful test is a failure!
        alternate UI suggestions if nothing else and these never end...

seems like a lot of duplication in the
    DBIC_TRACE output...
    are the results cached?
rental tags need attention
focus field for Users changes depending on
    creating/updating - how to effect this?
have Shankar update his time...
IE does not support :3000 on OSX - it's old.
    Firefox is much more forgiving.
    does IE on XP work?
Personal Retreats can begin and end on the same day
    The p.r. program itself has no begin or end date, right?
**regtable should (also?) have program id as the identifier
**    not just the name - as this name might be reused
the program listing page will grow as seasons pass
    should what appears there be restricted by a range of dates?
    that default to one month back to the infinite future?
checkin, then rental tags, then testplan. 
for testplan
    future or not
    web ready or not
    linked or not
    personal retreat or not - dates empty, unlinked, template = personal
    program images take priority over leader images
    only the first two leaders (alphabetically)
        get their individual pictures on the page.  okay?
        if not, a group pic as a program image is probably indicated.
avi_template needs its tags updated
    title => title1
    subtitle => title2 etc.
**FULL programs - very confusing
**    what if not full at first but then you edit it into fullness?
**templates have been modified.  cannot use the old ones.
super admin CAN set a password to anything
    nope, not null must be something (not 0)
users, roles => 
    roles cannot be created/deleted/added.
    only by me - I implement the meaning of the role.
**one worry - mailing list staff can edit/delete people
**    that are registered for a program... dangerous?
referential integrity issues...
    always have a javascript deletion alert
    and before and/or after deleting be sure to check:

    affils - show/ask about people, program & reports with that affil
        then delete and the 3 maps
    leaders - show/ask about programs, then delete, also images
    members - no problem
    rentals - no problem
    canpol - not if program
    people - not if leader or a member, if ok -> affil map
    housecost - not if program
    program - images, exceptions, leader map, affil map
        also a FULL version
    templates - not if program
    report - affil map
    user - role map
    exception - no problem
    string - can't delete
    role - can't delete
keep looking at the server log to
    see what inefficiencies can be eliminated
    asking about roles once in tt2 files and then using the answer
        many times is much much more efficient
**deleting a person requires no authorization at all???
**    we could make it mail_admin
**A Tk app with optimal interface for blitz registrations!
    to overcome the limits of the web - sans Ajax, that is.
    might be easier.
    would portably run on Windows or Linux
we will have further ref integrity issues when
    we do registration and housing, of course.
is there a way for us to have date objects automatically
    returned in the DBIx::Class object???
    a conversion done for us from d8 string to Date::Simple object???.
member sponsor payment history cannot be cleared
    for archival puposes.
    super admin is the only one that can delete members
        and along with the member goes the history.
document all date formats - in a popup help?
    linked to in various places.
    all formats including t, 5/6, 5
brochure generation
couple life members if partner+theirs >= 8000 then both.
New address? - for online reg page
tag for current date, current year
years of General membership fees do not go towards
    sponsoring membership, right?
members paying sponsor dues and becoming Life members
    many weird cases.   try em all.
    creating and/or updating.
    neither partner member, one pays 8000.
        both Life
    then again bring up Member form but
        do nothing - it changes to General:(
name of report is a required field.
    affil descr cannot be blank.
    name of rental cannot be blank.
    user name, password >= 5
    same for cancellation policy, housing cost
    use a red asterisk - class of 'required'
not green, red for messages?
    it's a class, right?
tags for current date, year.  in usual format.
use my modified templates as a new starting point.
Housing Cost default is called "Default" not MMC.
New Address? on online reg page
get OOs with a cron job - then faster when typing 'O', 'O'.
Brochure generation - include FULL programs by noting the extra days.
get_data for Person - return if @mess in all!
regtable should have the program record id in it
    so that similiarily named programs can be distinguished.
    also so that one can go directly to the program rather
    than needing to search for it...
redo people search form so there
    are bold labels.
    Pattern
    Search Field  and then vertically arranged?
    Search Type   o Prefix    o Substring
    Number per Page ___
don't mess with inserting % if phone number pattern already has a %?
Need some validation on the GL number in update_do
    for Program and Rental. - only the super admin can change it...
use fieldset and legends???
    try it.  mention it to Jamal.
New Address?  - add to online form
Can improve and now use the accessor methods in templates
    rather than in the code - better for sure.
    like $person->partner and $person->leader - done
    others, too
question for #catalyst or #tt
    mispelled method names do not raise exception???
    I tried TRY CATCH END but no exception for misspelled method/accessor
perhaps the date/time postmark can be elsewhere - or shown in the view mode?
    but not stuck in the comment?
why does Catalyst bomb on me when I try to use
     a non-existent field in an insert?  DBIx::Class gives
     me no real error message. :(
during registration - pop up person->comment
    if a certain "Pop Up Comment" affiliation is present...
it's sort of lame to have clicking on the title
    of a program be the way to see the registrations
    didn't want to have just a number.   or "Regs (10)" repeated in a sep column.
    perhaps that would be okay.
    Jamal can perhaps suggest some nice looking buttons
    X for delete
    something for Edit
    something for Create
    another for Registrations
in test plan for registrations:
    -1 day before +3 days after
    for the initial create screen for registration.
    oh man... on an update screen later the person could retype
        their start date and this would affect the finances. :(
        damn complex.
Registration
    conf_note and workstudy - need to show on initial
        reg screen.   don't really need perday???
    with this can we make a standard confirmation note template?
Members, Sponsors
    on Shankar's apple computer instance of dearReg
        archive the members and sponshist tables before
            overwriting with new revisions
    keep history of past payments
    keep total paid and also
        ?display total paid in last 6 months and in the last year?
    and another date - sponsor benefit expiry date
        user editable - settable after a payment?
        sponsors lapse only when this date is passed

    since the decision of when this expiry date is
    so complex let's at least display this history
    in a more accessible way.

    show this history in a graphical color coded table:

    Year   Jan Feb Mar May Jun Jul Aug Sep Oct Nov Dec
    2008   25
    2007   25          50          75
    2000   25          100         75
    1999           25  50          75

    dollar amount right justified in field?
    play with the widths

    color coded by degrees of how much the payment was
        25 - grey
        up to 50 - pink
        up to 75 - green
        up to 100 - blue etc
        or some such

    or a GD generated graph?
    ranging to 2008 at the far right?
    nah.

    is this correct:  (an equivalent version that is easier
    to calculate):
    if the person has paid at least $150 within the last
    year (from today going back) then they deserve sponsor
    membership benefits?  or $300 within the last two years?
    something like that?
Mention kids and work study on the online registration form?
    just in special requests or as an actual input field?
    CEU license is put there conditionally
Are discounts of > 7 and > 10 days handled properly
    when registering online?  Personal Retreats or programs?
For the doc: on registration creation screen
    you can put -1 to arrive a day before and +1 to
    stay one day after.
Doc: "Pop Up" comment affiliation
How to make changes to a registration and have
    the charges recomputed???   Delete all, redo?
    Might be the best... :(
Next - Sponsor in good standing (expiry date not yet reached)
    and has a day left.   They start at 12 (String?) on 1/1 each year.
Unlinked programs - have another program attribute: ul_directory_name
paging of printed web pages with CSS attribute
    which browsers suppport this?   Explorer, yes.
    perhaps others do but just not in Preview?
    use this for late notices and CEUs!
If you can't use all the fancy javascript ajax stuff
    don't worry.  It is going to work.  It can be gussied up
    over time if needed.
CEU charges $10 (String?) - it wouldn't ask for a CEU license
    number if the program didn't have footnotes, right?
    right.
Have a way to jump to a programs web page?  Staging/Live.
    Force in a new window?  Prolly a good idea as it
    is an entirely different world.
Arrival and payment of balance is only
    inserted when balance goes to zero.
    Not right?  They have arrived - just still have a balance.
    How often do people not fully pay at registration time?
Nights left - when first creating the sponsor membership
    are the nights left prorated within the year? - yes.
    otherwise - become a sponsor member on Dec 1st
    and get 12 nights!   several ways to 'game' the system, huh?
Discounts, charges - 10% if > 7 days, then they bring a kid.
    does the kid get a discount on his lodging, too?
Pro-rated nights benefit - if sign up in Oct - you get 3 nights.
    use ceil().  be generous.
Email All - what about people sans email?
    also General expiring
General paying - Jan thru May - next year May
    June-Dec - in next May
Jayanti - how do you deal with the once a year free week-long program
    or personal retreat for Life members?   Is this like
    an extra 7 days of free lodging they can use?
    Or are tuition and meals covered, too?
Separate generation of CEU programs by category.
    new development - new design of web site - ask Jamal.
show online regs by program and then by postmark date/time
Other ABC - on program line
Printable registration itemization with 'i' details.
Confirmation letter should
    include the charge/payment itemization
use the name 'default' for web templates and letter templates
have templates in root/static/templates with subdirectories
    of web and letter. - later for now templates and cl_templates
    will serve okay.
after publishing pictures
    show the unlinked programs as well.
need date help popup link
    explaining relative -1, +3 entries as well
what is the timeout value for being logged in?
staying extra days with housing cost of Total - not taken care of!
after someone has arrived and paid don't include
    them in the list of 'to register' people. - optionally.
don't need overlib.js everywhere - how to have it
    only when needed?   does it need to be loaded in <head>?
the "Pay" checkbox is checked on registration day
    otherwise it is unchecked.
need link to click on to "Get Online Now".
    where should it be?
apple-R to refresh will change list_reg_post to list_reg_name
    because a key was pressed.   clicking on refresh button does not.
    do nothing when non-printable keys are pressed.
    which ones?  dump keynum to see what it is.
house type width should be set - so it doesn't change
    when a singleton registration is reached.
    but what about when the user enlarges the text font size?
    use a % value???
house types like single_bath should be reshown
    as Single Bath - less geeky.
    do this with a special method in db/Registration.pm
        that makes the transform - like sdate_obj in db/Program.pm
        and a similar thing to transform textarea values.
            comment_br - with <br> for \r\n.
thought about not showing registrations that have already been paid off
    during the blitz time.    ask Jayanti.   conditional on the
    checkbox "Pay"?
    don't jump to pay_balance if it is already 0!
Why don't MMC programs have the funky MMC logo
    next to them on the programs.html page?
deletions of people - not if there are any registrations
sponsors using free nights - after a 10% discount
    they could actually make money!
need to be able to NOT use all the nights they have
    available.   registrar determines how many..
doc that online regs ARE gotten every 10 minutes
    but that you can "Grab New" if you wish.
for testplans for Programs:
    Grab New
    seeing Registrations
    after publishing - can publish pics
        also can click on Web to go to the
        web page for that program (whether linked or not).
    testplan for People
        can go to registrations
        can't delete if any registrations (also in deletions test plan)
If there's only one registrant for a program
    the link "Other <name>" will take you nowhere (to the same page).
Members needs lots of testing.
    I paid total of $5100 and became a Life member.
    I click on myself to see my status and hit Submit
    without changing anything and now I'm a General member.
    You need to update the benefits expiration date - automatically
    for Life members - set it to something way out.
When mailing all the members - some kind of report on
    how many were notified?
When resetting - ask for password?
    some more significant obstacle.
How to have confirm default to No/Cancel?
    none known - did a search
the link "Web" points to the staging area
    perhaps to .../live/... instead?
    yeah likely best - have this be configurable?
    two links?
when listing programs - on leaders, canpol, etc
    have a line indicating the boundary between past and future?
purge the root/static/templates/web directory
    of cal[0-9].html files after publishing - they're just
    temporary and unless purged they'll show up when
    looking at Templates
Need 'Grab New' when viewing a person's registration as well.
confirmation letter of a program with two leaders
    shows one picture but not the other.  why?
need Donor table 
    id
    person_id
    project_id
    amount
    date
need Project table
    id
    description
need SponsorNight table
    id
    member_id
    reg_id
    date
    num_nights

    the number of nights left is recomputed
    based on the tally of SponsorNights taken this year.

    these are shown as non-clickable
    links on the member screen
    program staff who are also member admins
        can see and click on them
Edit a reg and the charges are ALL recomputed.
    the sponsor night record is recreated.
create program.  the end date can be +3 meaning
    +3 days after the start date.
Okay... members
    i will provide:
        - a payment history including
          payments for a general membership that do
          not apply towards an accumulating sponsor membership
        - a history of when free nights/program is taken
            and for which registration.
        - manual control over status and expiry dates
        - only 3 statuses - general, sponsor and life.
        - when listing people check their lapse status.
            someone can be a lapsed sponsor member or
            a lapsed general member - if the expiry date is
            beyond today.
        - email notification to members informing them
            of their status - and their payment and nights-taken history.
            they can reply to it if they don't agree.
            include a link online they can consult that explains
            the whole membership policy.
    too difficult to do it automatically.
        e.g.  two partners each pay $4000.
        they become life members.   then they separate.
        now they're back to being sponsors.

        e.g.  the determination of when the sponsor
        expiry date is is just too complex.   people will
        not care too much about this date preciseness as long as
        they can keep the date in the future.   which they CAN
        do by paying regularily.   How about an automatic
        deduction from their credit card?  that would simplify
        things enormously.   but I presume many would rather
        just pay in lump sums.
    validate the Member create_edit params - must have a valid
        date for the selected category.
Why does Jayanti like the cryptic abbreviations in the comment
    field? 
            1-ot 2-sgl
        instead of
            1-Own Tent  2-Single
    no limit on comment length anymore...
Recomputing when editing a registration will work okay - except
    for the free nights and free program stuff - tricky!
OPEN GATE - no hot tubbing - in confirmation letter?
When cancelling a registration
    display cancellation policy, dates and how many days
    til the program starts and present a dialog:

        Shall they be given a $50 credit?

    The $50 defaults (from Strings) and can be changed.

    if credit is granted add a record to Credit which has a person_id foreign
    key and a reg_id foreign key and a date(today) and amount and
    an expiration date.    Show a person's credits when
    viewing their records.   a 'credits' method which returns
    an array of Credit records.

    send a cancellation letter which details whether they
    have a credit or not.

    when they next register - pop up that they have a credit
    that has not yet expired.  and use it as a negative charge.
    mark the Credit record with the program where they used it.
    So we have these columns:

    Credit
        id
        person_id
        reg_id
        amount
        date_given
        date_expires
        used_reg_id

    On cancellation add a RegHistory record to this effect.

    Cancellations can be UNcancelled - any credit will be scratched (deleted).
        should it not be deleted but marked in some way? nah.
        a RegHistory record will be added for the uncancellation.

    Charges will need to be marked with a type so that
    we can more easily clear and redo the charges for housing.

    Have a dialog to ask for confirmation before sending confirmation letter.
    Add a new command to ReSend the confirmation letter.

    Sponsor tuition discount - max of $125 each time.

    Have an easy way for the registrar to have the sponsor
    take as many nights lodging as possible.  Or not.

    Same as above for taking the free night for Life members.

    Add to the confirmation letter - notes about their having
    taken sponsor nights - and their needing to pay for meals.
When entering a new program the To date should
    be considered relative to the Start date.  So can say +2
    for a weekend program.  Works.
if cancelled - no payment of balance or sending of confirmation letter
    or any editing at all - except of the comment?
updated a person and it shows updated +8 hours?
    some problem on Shankar's machine - time????
search for registration given a receipt #.
CEU field should not be shown if an online registration in a program
    that does not allow CEUs.
what if a Life member takes a free program
    and comes two days early and stays a few days later?
have separate charges for the early and after days.
    then easier to not waive them.
if arrive late or leave early - credits for lodging?
    but not for tuition?
    num of 'program lodging days'. - waivable for Life members
    num of extra days (before or after) - not waivable
show person's membership status on the registration view.
    and nights taken/free program
a different date format?
    per person setting?
    3 Mar 09 rather than 03/03/09?
    then easier to see From 3 Mar 09 To 7 Mar 09 ???
some way to catch the catalyst server at boot time
    and set the default date format and to call Lookup->init()???
    ask MST
could have a link - add credit and ask for an amount
    and do a negative charge for the person
check for duplicate registrations and deny them
if member admin adjusts nights or free prog
    add a NightHist record.
    they can also do a global resetting - will add lots
        of NightHist records
start date of coming might = leaving date is okay

free nights (12 max) - much more than
    the program is long is possible if someone
    comes early, stays after
ask Jayanti/Brajesh about organization of reg screen - add/update
    top/bottom one/two column lines colors sizes
If person is coming early or staying after
    note this in the confirmation letter.
    At the bottom of the letter -  Charges, Payments in diff color.
Carpool list.
Sponsoring members cannot take free nights
    when the program is a Total Cost type program.
    Life members CAN take it free, however.
Need to do manual registration.
Online reg - unduplication needs doing and
    if new address for someone - their partner's address
    should be updated as well.
Be looking for ways to optimize the SQL.
    in a template rather than:
        [% IF person.registrations %]
            <span class=larger>Registration</span>
            [% FOR r IN person.registrations %]
                ...
            [% END %]
        [% END %]
    do this:
        [% regs = person.registrations %]
        [% IF regs %]
            <span class=larger>Registration</span>
            [% FOR r IN regs %]
                ...
            [% END %]
        [% END %]
style - for the larger green headings - h3?  larger?
    in ttsite.css not in each one...
add an order attribute to Leader
    defaults to 1.
    used when there are multiple leaders to order
    the way they are presented.
next - housing costs - should be fun
    images?  grab them, too.   resize the big ones.
    next, back for programs by name, date
    full programs need to be created afresh!
    sort by date - descending? ascending?
    or from today on??  or other ways of limiting the display?
        like a check box for showing all or just
        the current season or current plus prior?
        or a range of dates?
    transportation is not a program - what to do?
    confirmation letter - default everywhere.
    'Default' or 'default'?
    have the headings (name, date) be clickable to sort
        up and down
developers create a nifty library that they use
    and get attached to and then start promoting it
    so that others can use it.   the hype begins.
    the documentation may lag the hype.
    ego is involved for sure.  
    Use mine!  It is great!  I am great!
Grab New and Online links should be elsewhere.
transportation?
    reserve a ride at online registration time?
what if the image uploaded is a gif?
    we assume it is a jpg. - shall we allow?
use reg_start, prog_start, end too in web templates?
can't create a new user - why?
the disambiguation/verification step should take
    place even if the name matches only one or zero records.
current season - KORNFIELD FULL 07 should be KORNFIELD 07 FULL
problems with ennye (spanish n) in online reservations, etc.
    Christina Pen~a in mailing list but not there.
    when loading people.txt need to convert these
    8-bit chars to 7 bit...   what are they?
    search for them.  likely added via online reg.
many people were not put in mailing list
    because there was no address at all...
    won't work for the new way of organizing things...
we COULD have pennies if i removed int() calls
    and the -?\d+ edit.
deletion of registrations - what about deposit???
need a way of sending carpool list one-two weeks
    before the program.  rather than include
    it in the confirmation letter - because early registrants
    get very little.
why can't get id of current user from $c->user?
where is 'arrived' shown on reg view? or list?
seems that AJAX takes over and issues a request
    on simply uncovering a window or moving back to a browser app window
    where the registration list is shown.
    i noticed the activity in the server log zip by.
    fast!

    also - if i type too fast it confuses the AJAX calls.
        'c', 'h' typed in quick succession is ignored
        better 'c', pause, then the 'h' - not good.
have a radio button - future (normal), current, all,
    range (with two dates - start, end) and a Go button
    to refresh the programs shown.  or just one search field
    in which one can put a variety of things.
    date range, season name (incl cur - default),
    or a pattern to match if just one then one can hit return, yes?
finding flaws in f95, f96 programs - takes time...
view reg page - CEU, Carpool - funny table alignment
undup - same home phone??? same email address?
    when doing an online registration and looking up the
    person - if you can match the first, last name then
    try to match the home phone, cell phone or email address too.
need a new style - larger clickable <a>
    for program and person names on reg/view
no fancy highlight on info icon link
how about not having plurals in the menu up top?
    s s s s s s
delete unused and old affiliations
cal\d.tmp do not belong in the web templates
    directory - they are temporary files
lapse and lapse_soon should not be deletable
    they are needed by memberships
experiment with drop down menus - to make
    better use of the space
email blast to all in a program
    via a mailto: link?
    it would work, yes?  are there limits?
    otherwise - can do a textarea for the message
    and just send it off myself. - with Bcc or
    with individual emails.
should not be able to delete a program
    if there are registrations for it.
    and when deleting a registration - what about the
    payments?   and charges and history - not as important.
Shankar can help with mySQL/Postgres and CVS server on Krishna.
need a way to be on one person's registration
    and to search for anothers without going back
    to the list of all registrations
lists of both programs and registrations should
    show the first 15 and allow a quick searching/narrowing/restricting
    or seeing the next 15?

    programs should have a radio button/select list for
        current/date range/...?
        along with a search for a pattern.
on viewing a registration - a way to have a text
    field where you can see the list of other registrations
    matching the pattern - ajax-y like on the list of all registrations.
add the sender's name to the confirmation note history.
when one registration left in narrowing - used to be larger and reg
    what changed?  Okay in Firefox :(
make an Event controller.
    then CRUD - same as Rental essentially.
    then Calendar merging (via sdate) Events, Rentals, Programs.
event, program and rental listings
    default is from today forward
    a patterned list goes backward in time
        is this confusing?
calendar - links in more places
    append a ">" to events that are not complete???
make an undup facility - a menu choice shown
    when search results are displayed.  all the ids are passed (somehow)
    to the undup action.  there will be short text fields by each
    name where you will be able to put a code:
    p (primary), m (merge), or leave blank by each name.
        address, phones, email, date of last update will be shown as well
        as # of registrations.
    also - searching - if you append '50' then it will show 50 records
        per screen.
Also today - another field for a report - date of last activity
    when loading - copy date of entry to date of last update
    what about people who have no dates at all?
CMS/VistaPrint mailing to all members.
when using undup - also use searching by email - in case the
    last name is different - see email search for "ganth", Sheila.
    maiden name?
need an InActive attribute for people - for when they
    have not contacted the center for x number of years.
    Or if they are deceased.
need CMS list of members.
blue i's should not have the same link style as other links
need P and p for partnering so you know which
    address should be copied.
implement an address search - but don't include on UI.
    use it from the undup list.
if submit undup tool and no markings - give an error.
validate Canadian postal code?
if change housing costs or types then would need to recompute
    total charge for a rental.   registration charges as well.
    SO... make sure these charges are correct.
should we replace 8-bit characters with ~ in names, addresses?
the document should say that instead of modifying
     a housing cost you should add a new one.
     perhaps change names so that "Default" becomes
     "up to 5/2007" or something and then adding a new
     one called "Default".  If you modify one then the
     programs that use it become compromised and you can't
     understand its history as well.
     There is no limit to how many housing costs you can have.
online and manual registration - locating the proper
    person - a critical undup step.
when a rental payment comes in - who is it from?
    how do we know from the check/credit card statement
        which program it was for?
    AND extra receipts - they need a person's name
        i.e. a responsible party.   First choose a person
        then an extra account? then an amount and a what.
        Sukhdev just deleted most if not all of the extra accts.
    should we have leaders for rentals as well
        added in the same way as for programs?
tell me more about extra accounts
    what kind of things?
    temple donations - that's donations to a project.
    flashlight purchase?  that's at the store, right?
    transportation?  that's a silly use of programs as it is now.
    could transportation be added as a charge for a program?
    or is it best to have it in a separate place?
    Kaya Kalpa will have payments as well.    jeeeeeez.
    bottom line - if there are separate gl numbers for financing
        then we need a new/different place to record it.
new attribute for people - deceased - in addition to inactive
    * for affil in mlist
another attribute for housing cost - inactive
    so they're not offered.
    still create config records, however.
purging in old reg loses web descriptions :(
    is this true???
when hovering over a link with an access key
    the key does not change - fix this???
add meeting places, a way to assign them to programs, rentals,
    and events.   conflicts - how to avoid?
    offer available ones???   or just report a conflict on trying to
        double book?
    it is okay to have multiple meeting places for one program/rental/event.
THEN - use the GD library, image maps and balloon popups
    a la the Human Genome Project for the MMC Calendar 2.0
    along with buttons to see a wider range or with bigger this or that.
    study on what Lincoln did!
    style sheets with absolute placement?
the '#' char in addresses - filter out b4 Google mapping it.
Rajendra, SN have no knowledge of best order or effort required
    of new features (creeping).   They only have a sense of the larger
    reg rewrite because of estimates from the 4(5) bidders.
    Don't worry about it!   You're getting a bargain.
Can't redirect to root/static/fname.txt where the file is empty!
    get a server error - something about dropping the connection!
MMC include, exclude, only
partnering in bulk mailings
extra accounts, events, finance - only for program people
by category sans $ or nights left

make a date_range object
    events, programs, and rentals all will have one
    $dr1 = DateRange->new($sdate, $edate)
    $dr1->sdate;
    $dr1->edate;
    $dr1->ndays;
    $dr2 = DateRange->new($sd, $ed)
    $dr3 = $dr1->overlap($dr2)
    if (defined $dr3) ...
given a date ($today) generate a hash of Calendar objects
    keys are "year-month".
    such an object has a DateRange (1st - last of the month)
    an image (to write in), and a method called next_key
    which gives the next_key of the hash (of the succeeding month).
Bookings are for the entire time of the Event/Rental/Program.
    so - a date range, no time.
    an event (generic term for Event/Rental/Program) can have
        multiple bookings.
Rentals - more attributes to facilitate the
    give and take of contract negotiation?   Akhilesh
    put this in the Event Calendar - is it used?
    or do the sums handle this?
    cron job for reminders of critical dates (two weeks
        before start date to finalize the housing needs)
FULL programs also need the same meeting places as the normal program.
doc - if meeting place abbr is '-' it can be used for
    just displaying in a certain place (disp_ord, color).
    - no particular place.  like Ramayana happening.
events spanning month boundaries
putting something else in the popup?
    number of people registered/expected in a Program or Rental?
    the date range
writing the name on the rectangle
size of event span rectangles?
size of calendars?
perhaps PRE with no meeting place should be put
    at a certain fixed place on the calendar?
change date for PRE and meeting places invalidated.
begin and end the colored spans in the middle
    because programs can butt up to each other.
program reg count - on calendar
F Sa Su not Sa Su M
... if it doesn't fit???
when looking for dups - 
    - exact name match
    IF there IS an address then look for
        similar addresses with first/last that match 1st two chars
        addresses compare equal if they have the same #s in them
        and the same first letter
Calendar in same named window so they dont accumulate.
undup in new window
already partnered - clickable
two buttons in Reports
    Run Report
    Run Count
        or some such

    and checkbox for Share
Next, Prev for next/prev person by last/first name
Testplans - payments, xaccounts
    calendar, meeting place manipulations/searchings...
People testplan P, p
Date 0902 for 9-2 in current year.
bulk member mailing sponsor, snail - bombs??
URI::Escape for mailto link editing a letter before sending it
note that calendar link on top - always opens in same window
all the test cases for overlapping date ranges
    test booking a meeting space and note which
    ones are even offered - butted up is okay.
    no place in the inn.
validation of meeting place attributes
    color (3 numbers) and display order <= 7
a javascript color picker?
Meeting Place named "No Where" for unbooked PRE
range of dates for generating the monthly calendar
   individual dates, too?
   2009/09-2010/12
   or
   2008/02,2008/10,2009/10
cascade delete of an event to meeting places.
    done
later <area>s that overlap previous ones do not take priority.
    browser dependent?  likely not.
clicking on calendar region goes to target=_blank
    better to name the windows???
    should click on program go to registration list or view program???
examine SQL - for inefficiencies
    do some pre-fetching?
    or joining appropriately.
    or does it matter?
cacheing of colors in GD.
some way of indicating Program/Rental or Event???
what else in the Popup?   days?  descriptions?  capacities/registrations
    rental/program/event
add max capacity # to Rentals.
ask about financing of Rentals - not just actual housing?
    some interplay between max contractual, actual use?
a contact person (or persons) for a Rental.
    not a leader???   just a person_id(s).
    RentalPerson rental_person table.
    you type in the full name to choose it?
    then have contact info ... and a name to put with payments
scrolling through a big calendar is a drag.
    anchors? jump to them?  useful?   Yes.
it is now okay to have rentals/programs/events with
    the exact same name.
    this implies there's no need to put the date (month-day) in the name
single day events - how to show on calendar?
many test cases for edge events in calendar
    one day events, events that begin/end on month edges
    events that span from May 1 to Apr 1.   or May 10 to Apr 10.
put description in popup. - why not?
    nah - that is for the web.   the name should be a sufficient _identifier_.
    done.  it's a good thing.
for printing - special link
    PRE details below image
on left margin - SH, CCM??? maybe
no deposit yet - red border on rentals
    nah - too subtle - in the rental list in status column
* at end of rental name - CEU???
    ask Brajesh
new rental attributes
    contract sent date, by whom
    signed contract received, by whom
    deposit paid?
        i.e. there is at least one payment for this account
        what other charges?
        good to have the charges itemized?
            photocopying, extra food, etc.
            yes. and a printable invoice.
    max participants
        how does this figure into the total charge?
        e.g. we reserve space for 10, but in the
            end they only used 4 in a double, 2 in triples
    start hour, end hour - in addition to sdate, edate
        a charge if earlier than 4 and later than 1
        $2 per person (actual not max) per hour
        $2 - in strings
    deposit is $500 or $1000
        depending on size - how so? e.g. >50 => 1000?
        echo to screen when viewing, no column in table
    max, min
        max is guaranteed to be housed somewhere.
        min = int(.75 * max) or ceil?
        charge is actual usage OR days*min*dorm rate
            whichever is more.
        total_charge - recomputed after an edit
    an associated coordinator - to show when the bank
        deposit is done.  this is just a person_id that
        is typed in precisely - like a partner.
generate invoice
breakout spaces for rental/program with hourly use
    rare but does happen - make this a later enhancement
meeting places have a capacity
    compare it to the rental max and the program registration count
    eliminate a choice if it is too small? yes!
tabs for diff categories of info rather than one large form
browser skill - refreshing the screen
    searching within
another image map for jumping to different months!
    yes!  issues with centering the year #
    done - nice
clicking on calendar when that window is already up
    does not always do a refresh - why?  can I expire it immed?
    especially calprint.html
next - a margin (right, not left) with meeting place abbrevs
    there right justified ??? just noise?  already have three
    consistent indicators
        vertical placement, color, abbrev in popup
double clicking registration form WILL
    register someone twice :(  prevent with Javascript thingy.
read all bookings into core/a hash
    then you can quickly search it for where/if to place an event
    and for abutting happenings to put a red dotted line there.
the listing of rentals should have a status field among others
    contract sent, received & signed,
    deposit received, two week out finalization of max, ...
    a two week out automatic email - Cc'ing rental coordinator
    new role?  rental admin?
printable calendar - sans overlib, sans jump bar, with details of events
keep a count of registrations IN the program record
    much better, yes.  not so hard to maintain.
generate the overlib line once and reuse it in each meeting place
    good idea
    can one have multiple shape/coords in an <area>?
allocate all the colors you'll need for an image
    and store them in the ActiveCal object.
how to distinguish the programs from rentals from events?
    in the popup?  visually with the colored rectangle?
Missing affiliations in program???
Double housing registrations - not showing?
swap first, last in /person/view/?
expiration date/time on the calendar pages calprint.html especially
when rentals/programs reserve space way ahead of time
    like in 2011 or further the calendar generation ends up
    taking a LONG time and showing with lots of empty months.
    what to do????      Not show empty months?
When calendar starts in the middle of the year
    (or the end) what should the jump bar show and do?
    Just to the top?  Should the months show even if you
    can't jump to them?  A shorter jump bar for that year?
    How to center the year label?
how does MMC compare to the other centers as far
    as 'throughput' goes?  numbers of people housed, etc?
help file upload mechanism in Test Plans
    index page for help
    a single css file for help.
Comings and Goings
Current Population
optimize the calendar - use meeting places better (we already got them)
    reg count in program record - no regetting each time
add an optional maximum attribute for programs
    if non-zero show it in the calendar
in popup and on rectangle:
    Roth R OH 12 (for rental)
    Upasana SH   (for program)
heading - Maximum not Count
have the table of data collapse or not
    javascript to expand it if checked??
    may not print properly?
red border for rentals (with no contract/deposit),
    other colors for events, programs
the lapsed member list - mark those w/o email.
    then click on 'send email' and get their addresses.
for long and complex forms (program, rental) partition
    the fields into different tabs - javascript enabled -
    with one submit button that submits all fields.
on lapsed member list - sort by what - last name?
    and soon to lapse
date/time on apple???
    membership payments have messed up times.
loading past registrations - watch out for duplicate names
    and do some kind of disambiguation
    Andrea Moore!
an online app to allow updates to address, phone, etc.
    login using email address and generated password
    which we send to them ...
adding a new coordinator to a rental
    error message sucks.   offer to add anew?
at top:
    People   Listings Configuration Members    Jane Doe Logout Password
    Programs Rentals  Events        Calendar   Help
    
    Members shown only for Member admin else &nbsp;
    second line only for Program staff

    Listings
        Reports
        as before plus financial listings under heading
    Configuration
        Affiliations (no edit unless M)
        Cancellation Policies - Ps (no edit unless P)
        Exceptions - W
        Extra Accounts - Ps (no edit unless P)
        Housing Costs - Ps (no edit unless P)
        Leaders - Ps (no edit unless P)
        Meeting Places - Ps (no edit unless P)
        Projects (no edit unless M)
        Strings - W
        Templates - W
        Roles - S
        Users - S

        some not shown if not 
            Super admin, Program admin, Mail admin, Web admin
borders in calendar:
    solid black - program
    rental
        pink - sent
        red - no contract sent
        purple - contract received, no deposit
        green - deposit made
when a person cancels a registration should
    we decrement the registration count in the program record?
    yes.
is the number shown in the calendar for rental max
    the total of the lodging requests or the actual max?
    currently it is the total not the max.
do we want to distinguish rental contracts received
    and deposit paid with different colors?
    how often do you receive a signed contract without a deposit?
full programs will have the same meeting space as
    its non-full counterpart.
    you never edit the full program attributes
    it's just a little extension
    so when adding a meeting space to a program that has
        a FULL counterpart you need to take the end date
        of the full program instead of the end date of
        the non-full.
Personal Retreats 
    not figured in population counts
    how to add?
    have a fake meeting place for a Personal Retreat
        so that you'll have a disp_order and a color
    in a separate step add the Personal Retreats that
        fall within the range of the calendar
        when you click on the image map thingy 
            when any personal retreats are happening it takes
            you to a screen which shows the personal retreats
            for that day ONLY.
Document the "No Where" meeting place
be careful of programs/rents/events/prs/registrations that
    cross month boundaries, like full programs and prs that
    cross season boundaries
have a color in Strings for Personal Retreats and put them
    at the bottom of the calendar image.  adjust cal_height so
    that it accomodates the meeting places.  put the number
    of prs in the day occupying the entire width.  hovering
    shows the peoples names.  clicking takes you to
    a screen showing the pr registrations for that day.
    where you can click on an individual.  or does overlib
    provide a way (yes) where you can click on the name
    in the popup?  that would be better.
    for decimal rgb colors have a referral web page
    no need for a color picker - unless you can steal it.
calendar doc:
    PRE = (programs, rentals, events)
    from the current month on to the last scheduled PRE
    the labels F Sa Su are in Red.
    today is highlighted - with its own color
    jump table to go to another month

    meeting place colors, positions - up to 6 will fit
    assigning meeting places to PRE
    can click on rectangle to go to view the PRE
    printable - includes details of PRE
        including rental stage
        if multiple meeting places - comma separated
    Date field at top - to redefine starting place
    rentals
        4 statuses - each with own color (for the border), name
            New     (just entered)
            Sent    (contract sent)
            Deposit (signed contract and deposit received)
            Ready   (maximum confirmed)
        popup shows 10,6 - maximum and total of housing requests
            also shows the meeting place abbrev and status
        printable detail table shows status with background color
    programs
        popup shows # of registrations and meeting place abbrev
            (decremented when deleted/cancelled)
    personal retreats - shown at bottom
        has its own color
        number on that day is shown
        can click to see names (not hover - okay?)
        click on names to go to registration
    population count is at bottom
    programs with a FULL extension are shown
        dotted white line where normal ends, extension begins
        reg count is shown as 15+3
            meaning 15 regs for normal, 3 regs for FULL program.
        can go from FULL to normal with links on view program page
            and when there - to registrations
    when two PRE abutt a red/white line shows the need
        for a quick turnover of the meeting place.
        if the two do not share a meeting place no line is seen.
    in general what should the popups style be???
        made prs click since annoying if too many popups?
        make others clickable instead?
        force a closing click? or mouseout to close?
        timed?  what is best?
strings for rental start and end time and charge
    for extra hours.
CMS report needs country
    okay?
    VistaPrint as well?
Can't use " FULL" to find the full (or normal) program
    as it depends on the name...  the name WEINTRAUB appears 3 times
    and it gets the wrong FULL program.  also look at the starting date!
    perhaps have a foreign key to the full program? yes.
    that would save the lookup.
population counts are screwy when two programs abutt
    count first for breakfast but not for dinner
    count second for dinner but not for breakfast
    generating the 'meal list' distinguishes the two.
loading from old - cancelled regs don't contribute to reg_count???
max numbers for programs and events???
rental field validation
    maximum, start/end hour, dates for contract sending/receiving
    editing of GL Number - restricted to super admin
document - editing of GL number for programs - only super admin
instead of check marks for lunches - change the background color?
    done.  both.
it is POSSIBLE for a person to come 20 days early to a program
    and stay 30 days after.   highly unlikely but software engineers
    need to be ready for all things possible likely or not.
    how do we find these people and include them in any meal list
    or population count?  if the registration record _always_ set
    the date_start AND date_end values then we wouldn't need to 
    reference the program record to see who was where when, right?
    those fields could be indexed.
    when viewing a registration record we could still display special
    arriving or departing dates only if they varied from the
    program dates.
troublesome programs, rentals:
    YTT admin.2 ending 2010?
    open gate 3/21/06 - ends 2066
    mothering mag
simply exposing the window (switching away & back) of a list of registrations
    window causes a regetting????   ajax???
    yes, if the focus is in the search window
    NOT OKAY!
    the event is 'onkeyup'???
    do the ajax thing only if a real key
overlib popup too long - some way to calculate
    the length better - number of cap/lower case letters?
on registration list page - mark the early comers, late leavers
    somehow?
new attrib for registration - early_late - boolean
    says whether the date_start or the date_end differ
    from the program sdate, edate respectively.
    good for finding early arrivals.
    we can also mark them on the registration list somehow
rentals
    how often do people not come for the entire rental?
    is there some way to discourage it?   like a charge of some sort?
the plan:
    redo loadreg to always set date_start, date_end
        create index - test speed of access:

            select count(*) from registration
                where date_start <= d and d <= date_end 

        before and after...
        this will be done a lot for the population count and the meal list.
    rework the online, manual registration controller
    edit old reg to rectify the bogus dates in rentals/programs.
        ytt admin.2
        mothering mag
        open gate 3/21/6
        transportation
        others?
    redo the display of start, end in registration/view
        and mark them in the reg list.
    then redo population counts
    testing - online reg (program, PR), manual reg, editing reg.
        in each case - early, late, both, neither
times in program, rental - different?  need to be?
getting PRs into the calendar - be smarter about seasons
the printable link on the calendar page
    should toggle the display on/off tag for the
    tables of event info.  then the image maps will still
    be active.
redo the Program dialog - with tabs.
    add Lunches
then meal list.
make the PR popup stick, not mouseoff?
getting population counts for every day on the calendar
    on multiple mostly empty calendars is not truly useful.
    the maximum and reg_counts will give a rough idea.
    perhaps that will suffice but for an accurate count
    (people coming early, leaving late) we can provide
    them in the 'meal list' and the 'comings and goings'
    lists.
some problem with getting javascript and css files
    in there - along with auto layout - it seems to adjust to it
    and move them into <head>
should deletion of a program be so easy?
    does it cascade properly?
contract sent, received dates - validation
some rentals and prgroams ridiculously long - simply a place
    to make payments - or a way to keep them from being purged
    which is no longer needed...

    Programs:
    YTT 500
    YTT 500 ADMIN.2
    TRANSPORTATION
    MOTHERING MAG

    Rentals:
    OMEGA 2-11
    MEMBERSHIP
    SECLUSION
    CREDIT CARD MISC
    TEMPLE DONATIONS

Date::Simple today() does not use the default format! :(
need different way of looking for registrations
    it may entirely contain the two week period.
personal retreats will not have lunches.
date formats??? early/late list has so many slashes!
    could we leave the year off?  and put Jun 4 instead of 06/04???
        how about the dow?
    like the meal list...
foreign key for full programs
    and one going backwards as well?
    use edate from full program for meeting place bookings
        OR have doubled bookings allowed in this circumstance
        then can do normal methods on the full program
    show meeting place in full - but no update 
    same for leaders ???
    and lunches and ???
        lunches for both - and the normal range is written
            to by both?
do we need a comings and goings?
can't take a normal program (sans a FULL extension)
    and make the extradays attribute non-zero.
    okay the other way around - FULL to non FULL.
can't change the dates of a program after there
    are registrations for it. makes for all kinds of trouble!
note that normal and full programs have independent lunch updating.
meeting places and affils are done in normal, lunch in both.
lunches are still had by people leaving that day.
    not so for dinner.
    people who arrive that day get dinner but not lunch
    no lunch on the arrival day - but don't prohibit it???
    lunch is not possible the first day of the rental/program.
note in the doc that in the tabbed dialogs
    the current tab is maintained when moving
    between view and edit modes.
    (this was not easily achieved!)
    rental dialog - no edit of finances so tab is not there for edits
how about a faint colored background for the weekend
    days on the calendar?
testing - meal list
    have the range of dates requested vary
    ensure the same numbers come up for the days
    have people come early and leave late
    lunches on various days - including the first day (Not possible)
    people in programs, rentals, personal retreats
two main ways of getting the meal list:
    default - two weeks worth of totals starting today, no details
    enter t in both - check details - get just today with details

    you can get whatever you want but perhaps the most
        common two should be easier?
kids - add to the meal list???
need better sort for the lists of lapsed or soon to lapse members.
template toolkit
    py = m.payments
    py.amount is py[0].amount
    can't do py.0.amount??
    can't do m.payments.0.amount??
total payments - doesn't drop general payments????
    okay - but a little misleading having a total paid
    for general members.
to lapsed list
    add caveat - if there is any discrepancy please contact us.
    from membership@mountmadonna.org not the login email
    add link for getting just the list of snail mail addresses.
    make it show a static/ file rather than $c->res->output.
        to protect against resubmission?.
Listings - Referral list. - used?
add On Reg Notification to the Misc tab of Programs
    and use it.
meal list - should we have a place for storing a 'residential count'
    that could be added to the meal list counts?
deposits
    finalize, store old ones for reference.
calendar
    months at beginning and end of jump table
    may coerce towards recent and latest events.
comings/goings - rentals too
no longer necessary to schedule a separate
    personal retreat when someone comes early or leaves late
    i take care of the finances properly (default rate
        for the extra days before and/or after).
ask for list by postmark, then narrow the list => by name
    still says "By Name". -> By Postmark
when viewing registrations you see:
    non arrived, > 0 balance, non-cancelled
    unless you have requested 'All'.
    non arrived, zero balance will take you to the registration
        screen where you can choose 'Arrived'.
        this can happen if the total was collected online...
        they need to 'register' to know where their housing is.
    once you type a restricting pattern you no longer
        see the cancelled or arrived or > zero balance
        you must choose 'All' again.
    if you want to find a person's registration
        after they have arrived and paid:
            - go to registrations, click on All,
                scroll down, find them, click on them.
            - go to people search, find them, click on the reg
meal list should not include people
    who have not arrived!?
how to optimize the constant re-getting of programs?
    when making a late list for example
    a cache of some sort?  does SQL itself or DBIx::Class provide such?
doc - Personal Retreats F09
    must be entered along with the other programs in the season
list of members sans email - name, phone #

when making member payment (with subsequent email) & sending lapsed email
    make the response page an actual file that
    is viewed with root/static.  then a refresh will
    not resend?
name/addr on top of printed
ack of ack
click on name of lapse to get letter
no last payment in lapse letter?
ensure no double sending
    new window for the response?
housing charge correct if early/late?
dup regs?
_here_ in printed letter?
7 letter examples
sort lapsed by last name
Sanskrit - left align
i need local copies of all css attributes and
    javascript tutorials with event names, function list.
Grab New is broken??
difference between relationship belongs_to and might_have??
    could be 0?
drawing houses on daily pic:
    perhaps don't show full name? optional?
    have a way to insert a string/heading?
    or a line.
    so can have all OAKS tentsites arranged in a row
        without all the names in front?
rename class pr_links?
when do we recover space from the config records?
    no need to have them around forever.
    the cluster overview and daily picture will need to
    not allow going back in time too far.
    maybe have a string 'sys_first_config_date'???
    in analogy to sys_last_config_date???
TESTING of housing and everything else
    is critical before we go live.
    much much better to find any problems now
        rather than after we are depending on it!
requirements for the hcck (right?) program:
    - for every house id for every day from today to
        sys_last_config_date we have one and only one config record.
    - for every booking record there is the proper config records
        with max, cur = house->max, sex is R, program_id is 0.
    - for config records with a non-zero cur and a program id
        of non-zero there are exactly cur registration records
        with different reg ids.
ask Savita about coverage for rental bookings
    a couple in a tent - so just one instead of two?
    not much to do about it...
<select>, size=2 still shows 4.  even in t.html experiment.
    why?  to accomodate the scroll bar, apparently.
    it is fine.  compare to FireFox, IE.
maybe don't put the campground name on the daily picture but
    only the number.   then have a 'Label' object that
    gets drawn.
put the happenings of the day on the daily picture as well.
send Shyama all the variety of letters
    but first add to the sponsor letters the accumulated paid-to-date amount.
referential integrity when a house is deleted
    rental_booking, registration, config
new attr of person - deceased
    no email, reports, member communication
editing a house, changing max - effect on config???
be careful of double clicking an add of a house!
    prevent it?
dormitory with bath for an reg->h_type???
    loadreg messed up.
individual registration end date for personal retreat
    is relative to the start date not the program end date.
line 19631 in new/people.txt has dup id from prior record.
people having identity crises and gender crises and partner crises
    make for lots of trouble!
tests:
    new registration
        housing type of double, single, double bath, unknown, van, commuting
    update registration
        change housing type
    relodge (with same housing type).
houses will have an inactive attribute
    for when they're not being used.
    have config records for them? YES.
    or when re-activating them make sure
        all needed config records are there. NO.
have a daily picture that only shows 1 cluster?
    for efficiency of refreshing, clarity.
    mult clusters actually.
    does not shrink the upper left part of the image, however.
testing cases
    change type of housing - force a relodge
    change start or end date - force a relodge
    add M to double, force a F into same room => X
        vacate F, it reverts to an M.
        OR vacate the M and it reverts to an F
    add M to a double resized triple
        force two F into same room => X
        the room gets 'unresized' to a triple with
            people in there who think it's a double.
        vacate one of the F, it stays an X, then can't
        put F _or_ M in there.   what an orgy!
    try adding 4 people (forcing) into room with only 3 beds.
        the 4th should fail.
    with "Sharing a room with Farst List" in the comment field
        we look for that person and see if they're registered
        for the same program.  If so and they're already housed
        in the same type of housing then we put a message to
        that effect on the lodging screen.  If they were coming
        a day early or late and because of that the room were
        not available it will not be in the list...  
        Otherwise it will be defaulted to that room.  Nice!
        A suitable error message is displayed in all
        the other ways that this could go wrong.
            Could not find a person named Farst List.
            Farst List has not yet registered for Prog Nema.
            Farst List has not been housed.
            Farst List requested a housing type of 'Single' not 'Double'.
why is reg view so wide?
    second column should be narrower, yes?
    if car pool message then second column shrinks.
    any way to force a certain width on the second column?
make a retreatcenter.db which is a minimal set for testing
    and make it easy to reinstate it after mucking around.
personal retreats - an unlinked program
    what does its website look like?
    what p_id?  
    when registering online the user fills in the start, end dates?
    or puts it in special requests?
    how is payment calculated, taken?
I can't show an encoding when displaying the
    available houses - it is potentially different
    for each day!   what did I do in reg, anyway?
have another attribute for houses to direct
    how to display the name label near the rectangle representing the house.
    'display code' which consists of:
        one of:
            A above
            B below
            R right
            L left
        plus optionally appended:
            t truncate first word
    Easy! and nice.
sort the list of available houses
    by priority
    someone else in room.  (to maximize use)
    resize needed or not
    same program/rental
    same cluster
104B
    need the B?  not on room
Work on DailyPic to restrict the view to a cluster (clusters).
And leap to a day.
color picker
notes for demo on Wed
    thank you for condolences and flowers
    a satisfying challenge it is
    VERY complicated!  they know!
    this is serious - this is going to have a big
        impact on your work.  hopefully positive!
    (don't criticize playfulness as long as it is relevant)
    their testing is crucial and will take time
        can Brajesh assign someone?
        pay adrienne
        i'm doing what i can.  need help.
        lots of feedback.
        much better to find problems now before we 'go live'.
    list of new features since last demo
    Tabachnik?
    testing technique - cases, keep making them, add to list
use pop-up windows for small dialogs?
update glossary w housing terms
add list of houses in the coming and going listing.
    must be ready today for new arrivals.
    to be cleaned after they leave.
daily picture needs events on that day
note in doc that when changing the date (or max >)
    of an event or program or rental
    that you invalidate the meeting place booking
Transportation, Credit Card Misc, Seclusion
    no longer wedged into being a very long program or rental...
    what are these used for???
    Seclusion is like a PR?
also - Personal Retreats
    will not be in one big place
    each season has its own.
    AND no need to separately schedule a personal retreat
    for someone coming early to or staying later after a program.
have a sys_first_config as well?
    change it when adding houses, purging?
    ask about it.
training videos - screen capture demo, voice over
doc - in program and rental lists - you can type
    a search string in several forms
    f08, 2007, ady (search back to epoch) - backwards in time.
        or blank - forward from today.
        is this inconsistency okay?
can't unclick carpool button on website.
    must choose room or cabin even for tenters.
    fix!
    AND cvs add the source on mountmadonna.org/cgi-bin
doc - 'No Where' meeting place for happenings that have
    no other place.
test lodging in tents, center tents, triples, quads, dorms, economy
2 in a tent?  how?
need maximum for programs and events.
doc - change a max > for program or rental or event
    and it should invalidate the meeting place.
need (x, y) for cluster
    if present it will insert the full name of the
    cluster at that point in the daily picture.
what order to present the housing types in?
    commuting at top or bottom?
no lodge if commuting/own van/unknown
keep sc.css, sc.js in one place, include - how?
    and the table of clickable color squares included somehow?
double use - CC L - for meeting and/or for lodging.
    I can't deal with this.
doc - cluster matching in DailyPic - substr (LIKE)
lunches ok on arrival day never on Sat.
notify_on_reg - in programs?
confirmation letter - default
    cluttered with letters for membership.
calendar has a minimum height - only expands if there
    is an event with a meeting place row there...
need a printable view of Rentals and Programs.
    to see all tabs at once
    maybe just a javascript manipulation???
Rental contract - First Last addr1 city, state zip for Rental name.
    Jon Bjornstad 514 Button St Santa Cruz, CA 95060 for Fun and Games.
    okay?   any other inserted conjunctions or prepositions?
rental status gets updated on viewing of the rental.
    okay?
strange table behavior with # of People, Reserved Clusters
    in Rental View.   table td widths etc.
warning - reserve the entire cluster for a rental
    delete the booking of one room
    assign that room to another rental/program
    delete the cluster reservation of the cluster
        and you clobber the secondary assignment.
female, male want to room together
    lodge female
    when lodging male, the room is not offered
        because it would be mixing the genders.
        I do say "Share xxx with Fast Lirst?"
        but xxx is not among the choices.
        should it be?
        you _can_ type it in and force it.
        seems that it should be on top - with an X.
doc: DailyPic link shows you the date with the
    current rental/program/registration in view.
    cool!
lunch for a program on first day - and they
    arrive after breakfast - the listing does not show it.
there must be inefficiencies that I can improve
    in database access - joins?
do programs also have breakout spaces?  yes.
    also put larger font on top
have another table which is 'housing_log'
    in which you log actions affecting housing.
    this could be used to track down any glitches
    turn this on or off depending on history.
    on at first for sure.
    columns: time, date, comment
    including adding/deleting house, lodge, relodge, vacate, etc.
    have a way of running hcck from the web and seeing the output.
    or integrate it into the program?  nah.
insert sc.css, sc.js for color (inherited from Sue Center hence
    the sc) via a conditional in layout
    then can remove duplicated code in string, meeting place, etc.
ask the Catalyst irc group about simulaneous editing
    and clobbering changes.
today
    finish sum editing.
        if two at once - only update the diffs
        and ask about the conflict
    program breakout spaces
    coordinator, leader contact info = email, phones
    duplicate rentals, programs
        go into edit mode on program

        affils, sums, leaders are duplicated (new program id)
        sans dates, meeting places, lunches, clusters, exceptions
        with same canpol, housecost, 
breakout spaces - main meeting place
    can check both - main takes precedence
        could prevent it from being chosen - not worth it.
need wiki like expansions in fields in summary?
    i preserve leading spaces for them...
    what else?
deleting a program is possible but very dangerous
    should it be restricted/password protected?
th label, td <a href>text
    this does not align text - even with valign=top
    solution?
filling in the pattern from a registration screen search
    when there are more than one regs.   any way to force
    the cursor to the end of the field?
inconsistent use of Program/Rental title as link
    it's green.  and not always a link to the event.
what does housekeeping/field staff need?
    a daily list of rooms that need cleaning and by when?
    would appending a list of rooms to the going list help?
where else to use joins?
lots of repeated code used in searching for a registration
    where to include/exclude cancelled/zero balance people?
need elaborate test suite for full life cycle of
    program creation, registration, housing, re-housing,
    cancellation, arrival meal list, departure.
    confirmation, cancellation letters
    resending letters, seeing history.
    coming back getting refund
    using calendar, daily picture
    members/non-members, persona with popup comment
    deposit slip to bank.
    rentals, events, too.
    adjoining happenings on calendar.
confirmation notes
    if a line (in the multi-line text area)
    contains an abbr all by itself then expand.
cancellation letter - include the # of days before
    the event that the cancellation occured.
dailypic for days before today?
    go to event/program starting in the past, click on dailypic
    bombs.
    if before today() see if there's a config record
        for the day requested - otherwise make it the
        minimum config record's date.
rows for the confnote, comment in a registration?
    edit.tt2, create.tt2, confnote.tt2
    +2 from current?  min of 4?
doc: after duplicating a program you need to:
    rebook the meeting places
    reassert the lunches
    check the summary for anything that needs to be different

    during the initial dup dialog be aware of:
        verify any unlinked dir, housing cost, tuition cost
        as you may want these to be different.

    when duplicating mostly one provides new dates and accepts the rest.
bug? if give empty string to $c->res->output()
    then it goes to default template intead.
    not right???
insist on a thorough testing plan
    don't let Brajesh say that we'll test it as we go.
    he knows little about software
    his only real experience is with old reg which grew organically.
    this CAN be tested before we go live.
reg list by name - need same heading as with program view.
    forget # regs?
since we don't keep track of rentals individual housing
    we'll need to verify and clean rooms en masse - even if
    some of the attendees come late or leave early.  yes?
doc: deleting housing costs - why?
    just rename them!
    don't adjust default to reflect the new system.
    rename the default so we preserve the history.
    then add a new default.
prohibit most edits/deletes of a past registration???
    why allow a rewriting of history?
today - sep 2nd:
    include rentals in housekeeping list
        and have tents in a separate place?
        since they're another cluster maybe okay
    test tents at least.

housekeeping - need tent needed, vacatings
    so can do a walk through, right?
    to make sure things are in order for the guests?
    no garbage/damage etc?

doc: two people in room
     only one leaves
     nice to service that bed so it is neat
     for the remaining person.
TODO:
run through a complete cycle
    create program
    register online and manual
    receive registration, housing, conf letter
    arrival
    housekeeping, coming/going

    variations - member, come early, 
    multiple conf notes
late notices - paged output?
    what else on the page?
dup rentals
box with label (both or just one) on daily pic
    new table - annotations
    one attr is cluster foreign key
    label, labx, laby, box x1/y1 x2/y2
different fonts for GD?
    for bathrooms
okay to register for same program twice?
    for housing weirdnesses?
doc: late notices - personal retreats do not
        specify where the program is meeting.
    late notices for Saturday also include Sunday
doc: when getting an online reservation
    make sure the "Sharing a room with First Last."
    looks correct.  If capitalization is not right, fix it.
    Otherwise won't be able to find the person.
online reg - sharing with First Last
    have separate fields for First, Last
    so that people don't suffix with (husband) or (wife).
register (online or manual) leads to 
    a housing choice.  if you go Back at this point to change
    the housing type and then Forward again you will
    add _another_ registration!
write the F, M, X, R in colors?
    they're not very visible
    all different colors?  no - red - for visible blood.
    but don't put - or | in red.
    leave those in black.
optimizations
    look carefully at the SQL debug output
        consolidate multiple queries into one
        and use cheap memory wisely
    create indices
    use joins when you can as well.

    in Lookup->init($c) do a search and initialize globals:

    %clust_colors (key of cluster_id)
    %houses_in (key of cluster type, value of an array of house objects)
    %house_ids_in (key of cluster type, value of array of house ids)

    in RetreatCenterDB:

    sub connect {
        my $new = shift->next::method(@_);
        <populate pre-cache here>;
        return $new;
    }
    wow.  it worked!
    fast!

how does the ajax overlib popup from the DailyPic get styled?

viewing a housing cost
    (link from a program)
    how to see all?  cumbersome.
    
next - outdoor and special housing
doc: * is wildcard in search for program
    just like people
looking for housing needs optimization
    can we restrict it to tent or not?
when looking for tent - don't do the PO thingy
    yes the C
dispense with the ORM thing - use DBH directly
    to select distinct house_id from config where
        complex boolean and house_id in (x, y, z)
         to find houses that are not free.
    test cases?
make a list of complex test cases
    housing conundrums
Unknown - "No longer occupied"
reports should respect the deceased attr
    what else?
